# 📱 Android平板应用运行指南

**更新时间**: 2026年1月7日

---

## ✅ 当前状态

- ✅ 后端API已启动: http://localhost:8000
- ✅ 阿里云OCR已配置
- ✅ DeepSeek AI已配置
- ✅ Android应用代码已完成

---

## 🎯 两种运行方式

### 方式A: 使用Android模拟器（推荐 - 最简单）

**优势**:
- 不需要真实设备
- 配置简单
- 可以模拟平板尺寸

**步骤**:

#### 1. 打开Android Studio

```bash
# 如果已安装Android Studio
# 双击桌面图标或从开始菜单打开
```

#### 2. 打开项目

1. 启动Android Studio
2. 选择 "Open" 或 "Open an Existing Project"
3. 导航到项目目录
4. 选择 `android` 文件夹
5. 点击 "OK"

#### 3. 等待Gradle同步

- Android Studio会自动同步Gradle
- 第一次可能需要5-10分钟下载依赖
- 等待底部状态栏显示 "Gradle sync finished"

#### 4. 创建Android模拟器（如果还没有）

1. 点击工具栏的 "Device Manager" 图标
2. 点击 "Create Device"
3. 选择设备类型：
   - **推荐**: Pixel Tablet (10.95", 2560x1600)
   - 或其他平板设备
4. 选择系统镜像：
   - **推荐**: Android 13 (API 33) 或 Android 12 (API 31)
   - 点击 "Download" 下载系统镜像（如果需要）
5. 点击 "Next" → "Finish"

#### 5. 运行应用

1. 确保后端API正在运行（http://localhost:8000）
2. 在Android Studio顶部工具栏：
   - 选择刚创建的模拟器
   - 点击绿色的 "Run" 按钮（▶️）
3. 等待模拟器启动（首次启动可能需要2-3分钟）
4. 应用会自动安装并启动

#### 6. 测试功能

应用启动后，你会看到：
- 📸 启动页面
- 🔐 登录/注册页面
- 🏠 主页面
- 📷 拍照上传功能
- 📊 诊断报告查看

---

### 方式B: 使用真实Android设备

**优势**:
- 真实的用户体验
- 可以测试相机功能
- 性能更好

**前提条件**:
- 一台Android平板或手机
- USB数据线
- 设备和电脑在同一WiFi网络

**步骤**:

#### 1. 启用开发者选项

在Android设备上：
1. 打开 "设置"
2. 找到 "关于平板电脑" 或 "关于手机"
3. 连续点击 "版本号" 7次
4. 返回设置，找到 "开发者选项"
5. 启用 "USB调试"

#### 2. 连接设备

1. 用USB线连接设备到电脑
2. 设备上会弹出 "允许USB调试" 提示
3. 勾选 "始终允许"，点击 "确定"

#### 3. 修改API地址

因为真实设备不能使用`10.0.2.2`，需要修改配置：

1. 获取你电脑的IP地址：
   ```bash
   ipconfig
   ```
   找到 "IPv4 地址"，例如：`192.168.1.100`

2. 修改 `android/app/build.gradle.kts`：
   ```kotlin
   // 第27行左右
   buildConfigField("String", "API_BASE_URL", "\"http://你的IP地址:8000/\"")
   // 例如：
   buildConfigField("String", "API_BASE_URL", "\"http://192.168.1.100:8000/\"")
   ```

3. 同步Gradle（点击顶部的 "Sync Now"）

#### 4. 运行应用

1. 在Android Studio顶部工具栏选择你的设备
2. 点击绿色的 "Run" 按钮（▶️）
3. 应用会安装到你的设备上

---

## 🎨 应用界面预览

### 主要功能页面

1. **启动页面**
   - 应用Logo
   - 加载动画

2. **登录/注册页面**
   - 用户名/邮箱输入
   - 密码输入
   - 登录/注册切换

3. **主页面**
   - 欢迎信息
   - 快速操作按钮
   - 最近的试卷列表

4. **拍照上传页面**
   - 相机预览
   - 拍照按钮
   - 从相册选择
   - 试卷信息输入（科目、年级等）

5. **处理状态页面**
   - 上传进度
   - OCR识别进度
   - AI分析进度
   - 预计剩余时间

6. **诊断报告页面**
   - 总体评分
   - 知识点掌握情况
   - 错题分析
   - 学习建议
   - 分享功能

7. **历史记录页面**
   - 所有试卷列表
   - 筛选和搜索
   - 查看详情

---

## 🔧 常见问题

### Q1: 模拟器启动失败

**解决方法**:
1. 确保已启用虚拟化（BIOS中的VT-x或AMD-V）
2. 关闭Hyper-V（如果使用Intel HAXM）
3. 尝试创建不同的模拟器配置

### Q2: 应用无法连接后端

**检查清单**:
- [ ] 后端API是否正在运行？
  ```bash
  curl http://localhost:8000/health
  ```
- [ ] 模拟器使用的是 `10.0.2.2` 吗？
- [ ] 真实设备使用的是正确的IP地址吗？
- [ ] 防火墙是否阻止了8000端口？

**测试连接**:
在模拟器/设备的浏览器中访问：
- 模拟器: `http://10.0.2.2:8000/health`
- 真实设备: `http://你的IP:8000/health`

应该看到: `{"status":"healthy","version":"1.0.0"}`

### Q3: Gradle同步失败

**解决方法**:
1. 检查网络连接
2. 使用国内镜像（如果在中国）
3. 清理Gradle缓存：
   ```bash
   cd android
   .\gradlew clean
   ```

### Q4: 应用闪退

**查看日志**:
1. 在Android Studio底部点击 "Logcat"
2. 筛选应用包名: `com.examai`
3. 查看错误信息

---

## 📊 性能优化建议

### 模拟器性能优化

1. **分配更多内存**
   - Device Manager → 编辑设备 → Show Advanced Settings
   - RAM: 建议4GB以上
   - VM heap: 建议512MB

2. **启用硬件加速**
   - 确保使用 x86_64 系统镜像
   - 启用 "Use Host GPU"

3. **关闭不必要的功能**
   - 关闭动画
   - 降低屏幕分辨率

---

## 🎯 测试流程建议

### 完整功能测试

1. **注册新用户**
   - 输入用户名、邮箱、密码
   - 验证注册成功

2. **登录**
   - 使用刚注册的账号登录
   - 验证登录成功，进入主页

3. **上传试卷**
   - 点击 "拍照上传" 或 "从相册选择"
   - 选择一张试卷图片
   - 填写试卷信息（科目、年级、考试类型）
   - 点击 "上传"

4. **查看处理状态**
   - 观察上传进度
   - 观察OCR识别进度
   - 观察AI分析进度
   - 等待约60秒

5. **查看诊断报告**
   - 查看总体评分
   - 查看知识点分析
   - 查看错题详情
   - 查看学习建议

6. **测试其他功能**
   - 查看历史记录
   - 分享报告
   - 退出登录

---

## 📱 推荐的测试设备配置

### 模拟器配置

| 配置项 | 推荐值 |
|--------|--------|
| 设备 | Pixel Tablet (10.95") |
| 系统版本 | Android 13 (API 33) |
| RAM | 4GB |
| 内部存储 | 8GB |
| 分辨率 | 2560x1600 |

### 真实设备要求

| 要求 | 最低配置 | 推荐配置 |
|------|---------|---------|
| Android版本 | 7.0 (API 24) | 12.0+ (API 31+) |
| 屏幕尺寸 | 7英寸 | 10英寸+ |
| RAM | 2GB | 4GB+ |
| 存储空间 | 100MB | 500MB+ |
| 相机 | 5MP | 8MP+ |

---

## 🚀 下一步

运行成功后，你可以：

1. **体验完整流程**
   - 上传真实试卷
   - 查看真实的OCR识别结果
   - 查看真实的AI诊断报告

2. **测试UI/UX**
   - 检查界面布局
   - 测试交互流畅度
   - 验证用户体验

3. **发现问题**
   - 记录bug
   - 提出改进建议
   - 优化用户体验

4. **准备发布**
   - 生成签名APK
   - 准备应用商店素材
   - 编写应用描述

---

## 📞 需要帮助？

如果遇到问题：

1. 查看Android Studio的Logcat日志
2. 查看后端API日志
3. 检查网络连接
4. 随时问我！

---

**祝你运行顺利！** 🎉

准备好在平板上看到你的应用了吗？
