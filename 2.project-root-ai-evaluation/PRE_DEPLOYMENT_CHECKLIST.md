# âœ… ç”Ÿäº§éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•

**åœ¨æ‰§è¡Œç”Ÿäº§éƒ¨ç½²å‰ï¼Œè¯·é€é¡¹ç¡®è®¤ä»¥ä¸‹å†…å®¹**

---

## ğŸ“‹ ç¬¬ä¸€é˜¶æ®µï¼šç¯å¢ƒå‡†å¤‡ (é¢„è®¡ 30 åˆ†é’Ÿ)

### 1.1 æœåŠ¡å™¨å‡†å¤‡

- [ ] æœåŠ¡å™¨å·²å‡†å¤‡å°±ç»ªï¼ˆæ»¡è¶³æœ€ä½é…ç½®è¦æ±‚ï¼‰
  - CPU: 4æ ¸+
  - å†…å­˜: 8GB+
  - å­˜å‚¨: 50GB+ SSD
  - ç½‘ç»œ: ç¨³å®šçš„äº’è”ç½‘è¿æ¥

- [ ] æ“ä½œç³»ç»Ÿå·²å®‰è£…å¹¶æ›´æ–°
  ```bash
  sudo apt-get update && sudo apt-get upgrade -y
  ```

- [ ] Docker å·²å®‰è£… (20.10+)
  ```bash
  docker --version
  ```

- [ ] Docker Compose å·²å®‰è£… (2.0+)
  ```bash
  docker-compose --version
  ```

- [ ] Git å·²å®‰è£…
  ```bash
  git --version
  ```

### 1.2 ç½‘ç»œé…ç½®

- [ ] åŸŸåå·²å‡†å¤‡å¹¶è§£æåˆ°æœåŠ¡å™¨ IP
  ```bash
  nslookup api.yourdomain.com
  ```

- [ ] é˜²ç«å¢™å·²é…ç½®
  - [ ] ç«¯å£ 80 (HTTP) å·²å¼€æ”¾
  - [ ] ç«¯å£ 443 (HTTPS) å·²å¼€æ”¾
  - [ ] ç«¯å£ 22 (SSH) å·²å¼€æ”¾

- [ ] SSL è¯ä¹¦å·²è·å–
  ```bash
  ls -la /etc/letsencrypt/live/api.yourdomain.com/
  ```

---

## ğŸ”‘ ç¬¬äºŒé˜¶æ®µï¼šAPI å¯†é’¥å‡†å¤‡ (é¢„è®¡ 1-2 å°æ—¶)

### 2.1 OCR æœåŠ¡ (å¿…éœ€ï¼Œè‡³å°‘ä¸€ä¸ª)

**ç™¾åº¦ OCR**:
- [ ] å·²æ³¨å†Œç™¾åº¦æ™ºèƒ½äº‘è´¦å·
- [ ] å·²åˆ›å»º OCR åº”ç”¨
- [ ] å·²è·å– API Key: `________________`
- [ ] å·²è·å– Secret Key: `________________`
- [ ] å·²æµ‹è¯• API å¯ç”¨æ€§

**è…¾è®¯äº‘ OCR** (å¯é€‰):
- [ ] å·²æ³¨å†Œè…¾è®¯äº‘è´¦å·
- [ ] å·²å¼€é€š OCR æœåŠ¡
- [ ] å·²è·å– Secret ID: `________________`
- [ ] å·²è·å– Secret Key: `________________`

### 2.2 AI æœåŠ¡ (å¿…éœ€)

**DeepSeek API**:
- [ ] å·²æ³¨å†Œ DeepSeek è´¦å·
- [ ] å·²è·å– API Key: `________________`
- [ ] å·²å……å€¼æˆ–ç¡®è®¤æœ‰å…è´¹é¢åº¦
- [ ] å·²æµ‹è¯• API å¯ç”¨æ€§
  ```bash
  curl -X POST https://api.deepseek.com/v1/chat/completions \
    -H "Authorization: Bearer YOUR_API_KEY" \
    -H "Content-Type: application/json" \
    -d '{"model":"deepseek-chat","messages":[{"role":"user","content":"Hello"}]}'
  ```

### 2.3 å¯¹è±¡å­˜å‚¨ (å¯é€‰ä½†æ¨è)

**é˜¿é‡Œäº‘ OSS**:
- [ ] å·²æ³¨å†Œé˜¿é‡Œäº‘è´¦å·
- [ ] å·²åˆ›å»º OSS Bucket
- [ ] å·²è·å– Access Key: `________________`
- [ ] å·²è·å– Secret Key: `________________`
- [ ] Bucket åç§°: `________________`
- [ ] Endpoint: `________________`

### 2.4 çŸ­ä¿¡æœåŠ¡ (å¯é€‰)

**é˜¿é‡Œäº‘çŸ­ä¿¡** æˆ– **è…¾è®¯äº‘çŸ­ä¿¡**:
- [ ] å·²å¼€é€šçŸ­ä¿¡æœåŠ¡
- [ ] å·²è·å– API Key: `________________`
- [ ] å·²è·å– API Secret: `________________`
- [ ] å·²é…ç½®çŸ­ä¿¡ç­¾å
- [ ] å·²é…ç½®çŸ­ä¿¡æ¨¡æ¿

---

## âš™ï¸ ç¬¬ä¸‰é˜¶æ®µï¼šé¡¹ç›®é…ç½® (é¢„è®¡ 30 åˆ†é’Ÿ)

### 3.1 ä»£ç å‡†å¤‡

- [ ] ä»£ç å·²å…‹éš†åˆ°æœåŠ¡å™¨
  ```bash
  git clone <repository-url>
  cd exam-assessment
  ```

- [ ] å·²åˆ‡æ¢åˆ°æ­£ç¡®çš„åˆ†æ”¯
  ```bash
  git checkout main
  git pull origin main
  ```

### 3.2 ç¯å¢ƒå˜é‡é…ç½®

- [ ] å·²å¤åˆ¶ .env.example åˆ° .env
  ```bash
  cp .env.example .env
  ```

- [ ] å·²ç”Ÿæˆå®‰å…¨å¯†é’¥
  ```bash
  # SECRET_KEY (32å­—ç¬¦+)
  openssl rand -hex 32
  
  # JWT_SECRET_KEY (32å­—ç¬¦+)
  openssl rand -hex 32
  
  # POSTGRES_PASSWORD (16å­—ç¬¦+)
  openssl rand -base64 24
  
  # REDIS_PASSWORD (16å­—ç¬¦+)
  openssl rand -base64 24
  ```

- [ ] å·²é…ç½®æ•°æ®åº“å¯†ç 
  - POSTGRES_PASSWORD: `________________`

- [ ] å·²é…ç½® Redis å¯†ç 
  - REDIS_PASSWORD: `________________`

- [ ] å·²é…ç½®åº”ç”¨å¯†é’¥
  - SECRET_KEY: `________________`
  - JWT_SECRET_KEY: `________________`

- [ ] å·²é…ç½® OCR API
  - BAIDU_OCR_API_KEY: `________________`
  - BAIDU_OCR_SECRET_KEY: `________________`

- [ ] å·²é…ç½® DeepSeek API
  - DEEPSEEK_API_KEY: `________________`

- [ ] å·²é…ç½® Grafana å¯†ç 
  - GRAFANA_PASSWORD: `________________`

- [ ] å·²é…ç½® CORS åŸŸå
  - ALLOWED_ORIGINS: `________________`

### 3.3 SSL è¯ä¹¦é…ç½®

- [ ] å·²åˆ›å»º SSL ç›®å½•
  ```bash
  mkdir -p nginx/ssl
  ```

- [ ] å·²å¤åˆ¶è¯ä¹¦æ–‡ä»¶
  ```bash
  sudo cp /etc/letsencrypt/live/api.yourdomain.com/fullchain.pem nginx/ssl/cert.pem
  sudo cp /etc/letsencrypt/live/api.yourdomain.com/privkey.pem nginx/ssl/key.pem
  ```

- [ ] å·²è®¾ç½®è¯ä¹¦æƒé™
  ```bash
  sudo chmod 644 nginx/ssl/cert.pem
  sudo chmod 600 nginx/ssl/key.pem
  ```

### 3.4 Nginx é…ç½®

- [ ] å·²æ›´æ–° nginx/nginx.conf ä¸­çš„åŸŸå
  ```nginx
  server_name api.yourdomain.com;
  ```

---

## ğŸš€ ç¬¬å››é˜¶æ®µï¼šéƒ¨ç½²æ‰§è¡Œ (é¢„è®¡ 15 åˆ†é’Ÿ)

### 4.1 æ„å»ºé•œåƒ

- [ ] Docker é•œåƒæ„å»ºæˆåŠŸ
  ```bash
  docker-compose -f docker-compose.prod.yml build --no-cache
  ```

### 4.2 å¯åŠ¨æœåŠ¡

- [ ] æ‰€æœ‰æœåŠ¡å·²å¯åŠ¨
  ```bash
  docker-compose -f docker-compose.prod.yml up -d
  ```

- [ ] æœåŠ¡çŠ¶æ€æ£€æŸ¥é€šè¿‡
  ```bash
  docker-compose -f docker-compose.prod.yml ps
  ```

### 4.3 æ•°æ®åº“åˆå§‹åŒ–

- [ ] æ•°æ®åº“è¿ç§»å·²å®Œæˆ
  ```bash
  docker-compose -f docker-compose.prod.yml exec backend alembic upgrade head
  ```

---

## âœ… ç¬¬äº”é˜¶æ®µï¼šéªŒè¯æµ‹è¯• (é¢„è®¡ 20 åˆ†é’Ÿ)

### 5.1 æœåŠ¡å¥åº·æ£€æŸ¥

- [ ] åç«¯å¥åº·æ£€æŸ¥é€šè¿‡
  ```bash
  curl http://localhost/health
  # é¢„æœŸ: {"status":"healthy"}
  ```

- [ ] PostgreSQL è¿æ¥æ­£å¸¸
  ```bash
  docker-compose -f docker-compose.prod.yml exec postgres pg_isready
  # é¢„æœŸ: accepting connections
  ```

- [ ] Redis è¿æ¥æ­£å¸¸
  ```bash
  docker-compose -f docker-compose.prod.yml exec redis redis-cli -a $REDIS_PASSWORD ping
  # é¢„æœŸ: PONG
  ```

- [ ] Celery Worker è¿è¡Œæ­£å¸¸
  ```bash
  docker-compose -f docker-compose.prod.yml logs celery_worker | grep "ready"
  ```

### 5.2 API åŠŸèƒ½æµ‹è¯•

- [ ] API æ–‡æ¡£å¯è®¿é—®
  ```bash
  curl http://localhost/docs
  ```

- [ ] æ³¨å†Œæ¥å£æµ‹è¯•é€šè¿‡
  ```bash
  curl -X POST http://localhost/api/v1/auth/register \
    -H "Content-Type: application/json" \
    -d '{"phone":"13800138000","password":"Test123456","verification_code":"123456"}'
  ```

- [ ] ç™»å½•æ¥å£æµ‹è¯•é€šè¿‡
  ```bash
  curl -X POST http://localhost/api/v1/auth/login \
    -H "Content-Type: application/json" \
    -d '{"phone":"13800138000","password":"Test123456"}'
  ```

### 5.3 ç›‘æ§æœåŠ¡æ£€æŸ¥

- [ ] Prometheus å¯è®¿é—®
  ```bash
  curl http://localhost:9090
  ```

- [ ] Grafana å¯è®¿é—®
  ```bash
  curl http://localhost:3000
  ```

- [ ] ç›‘æ§æŒ‡æ ‡æ­£å¸¸é‡‡é›†
  - è®¿é—® Prometheus: http://your-server-ip:9090/targets
  - ç¡®è®¤æ‰€æœ‰ targets çŠ¶æ€ä¸º UP

### 5.4 æ€§èƒ½æµ‹è¯•

- [ ] API å“åº”æ—¶é—´ < 200ms
  ```bash
  curl -w "@curl-format.txt" -o /dev/null -s http://localhost/health
  ```

- [ ] å¹¶å‘æµ‹è¯•é€šè¿‡ (å¯é€‰)
  ```bash
  ab -n 1000 -c 10 http://localhost/health
  ```

---

## ğŸ“Š ç¬¬å…­é˜¶æ®µï¼šç›‘æ§é…ç½® (é¢„è®¡ 15 åˆ†é’Ÿ)

### 6.1 Grafana é…ç½®

- [ ] å·²ç™»å½• Grafana (admin / GRAFANA_PASSWORD)
- [ ] å·²æ·»åŠ  Prometheus æ•°æ®æº
- [ ] å·²å¯¼å…¥ç›‘æ§ä»ªè¡¨æ¿
- [ ] ä»ªè¡¨æ¿æ˜¾ç¤ºæ­£å¸¸æ•°æ®

### 6.2 å‘Šè­¦é…ç½®

- [ ] å·²é…ç½®å‘Šè­¦è§„åˆ™
- [ ] å·²é…ç½®å‘Šè­¦é€šçŸ¥æ¸ é“
- [ ] å·²æµ‹è¯•å‘Šè­¦åŠŸèƒ½

---

## ğŸ›¡ï¸ ç¬¬ä¸ƒé˜¶æ®µï¼šå®‰å…¨åŠ å›º (é¢„è®¡ 20 åˆ†é’Ÿ)

### 7.1 é˜²ç«å¢™é…ç½®

- [ ] UFW é˜²ç«å¢™å·²å¯ç”¨
  ```bash
  sudo ufw status
  ```

- [ ] åªå¼€æ”¾å¿…è¦ç«¯å£
  - [ ] 22 (SSH)
  - [ ] 80 (HTTP)
  - [ ] 443 (HTTPS)

### 7.2 è®¿é—®æ§åˆ¶

- [ ] å·²ç¦ç”¨ root SSH ç™»å½•
- [ ] å·²é…ç½® SSH å¯†é’¥è®¤è¯
- [ ] å·²æ›´æ”¹é»˜è®¤ SSH ç«¯å£ (å¯é€‰)

### 7.3 æ—¥å¿—é…ç½®

- [ ] æ—¥å¿—è½®è½¬å·²é…ç½®
- [ ] æ—¥å¿—ä¿ç•™ç­–ç•¥å·²è®¾ç½®
- [ ] é”™è¯¯æ—¥å¿—ç›‘æ§å·²å¯ç”¨

---

## ğŸ’¾ ç¬¬å…«é˜¶æ®µï¼šå¤‡ä»½é…ç½® (é¢„è®¡ 15 åˆ†é’Ÿ)

### 8.1 æ•°æ®åº“å¤‡ä»½

- [ ] å¤‡ä»½è„šæœ¬å·²åˆ›å»º
  ```bash
  chmod +x scripts/backup.sh
  ```

- [ ] å¤‡ä»½ç›®å½•å·²åˆ›å»º
  ```bash
  mkdir -p /backup/postgres
  ```

- [ ] Cron ä»»åŠ¡å·²é…ç½®
  ```bash
  crontab -l | grep backup.sh
  ```

- [ ] å¤‡ä»½æµ‹è¯•æˆåŠŸ
  ```bash
  ./scripts/backup.sh
  ls -lh /backup/postgres/
  ```

### 8.2 æ¢å¤æµ‹è¯•

- [ ] å·²æµ‹è¯•æ•°æ®åº“æ¢å¤æµç¨‹
- [ ] æ¢å¤æ–‡æ¡£å·²å‡†å¤‡

---

## ğŸ“ ç¬¬ä¹é˜¶æ®µï¼šæ–‡æ¡£å‡†å¤‡ (é¢„è®¡ 10 åˆ†é’Ÿ)

### 9.1 è¿ç»´æ–‡æ¡£

- [ ] å·²è®°å½•æ‰€æœ‰å¯†ç å’Œå¯†é’¥ï¼ˆå®‰å…¨å­˜å‚¨ï¼‰
- [ ] å·²è®°å½•æœåŠ¡å™¨ä¿¡æ¯
  - IP åœ°å€: `________________`
  - åŸŸå: `________________`
  - SSH ç«¯å£: `________________`

- [ ] å·²è®°å½•ç›‘æ§åœ°å€
  - Prometheus: `________________`
  - Grafana: `________________`

### 9.2 åº”æ€¥è”ç³»

- [ ] å·²å‡†å¤‡åº”æ€¥è”ç³»äººåˆ—è¡¨
- [ ] å·²å‡†å¤‡æ•…éšœå¤„ç†æµç¨‹æ–‡æ¡£

---

## ğŸ¯ ç¬¬åé˜¶æ®µï¼šä¸Šçº¿å‡†å¤‡ (é¢„è®¡ 10 åˆ†é’Ÿ)

### 10.1 æœ€ç»ˆæ£€æŸ¥

- [ ] æ‰€æœ‰æœåŠ¡è¿è¡Œç¨³å®š (è‡³å°‘ 30 åˆ†é’Ÿ)
- [ ] æ— é”™è¯¯æ—¥å¿—
  ```bash
  docker-compose -f docker-compose.prod.yml logs | grep ERROR
  ```

- [ ] èµ„æºä½¿ç”¨æ­£å¸¸
  ```bash
  docker stats
  ```

- [ ] ç£ç›˜ç©ºé—´å……è¶³
  ```bash
  df -h
  ```

### 10.2 æ€§èƒ½åŸºå‡†

- [ ] å·²è®°å½•åˆå§‹æ€§èƒ½æŒ‡æ ‡
  - API å¹³å‡å“åº”æ—¶é—´: `______ ms`
  - æ•°æ®åº“è¿æ¥æ•°: `______`
  - å†…å­˜ä½¿ç”¨: `______ %`
  - CPU ä½¿ç”¨: `______ %`

### 10.3 å›æ»šå‡†å¤‡

- [ ] å·²å‡†å¤‡å›æ»šæ–¹æ¡ˆ
- [ ] å·²å¤‡ä»½å½“å‰é…ç½®
- [ ] å·²æµ‹è¯•å›æ»šæµç¨‹

---

## ğŸš€ éƒ¨ç½²æ‰§è¡Œ

**å½“æ‰€æœ‰æ£€æŸ¥é¡¹éƒ½å®Œæˆåï¼Œæ‰§è¡Œæœ€ç»ˆéƒ¨ç½²ï¼š**

```bash
# 1. æœ€åä¸€æ¬¡ä»£ç æ›´æ–°
git pull origin main

# 2. æ‰§è¡Œéƒ¨ç½²
./scripts/deploy.sh production

# 3. ç›‘æ§æ—¥å¿—
docker-compose -f docker-compose.prod.yml logs -f

# 4. éªŒè¯æœåŠ¡
curl http://localhost/health
```

---

## ğŸ“ éƒ¨ç½²åæ”¯æŒ

**éƒ¨ç½²å®Œæˆåçš„å‰ 24 å°æ—¶ï¼š**

- [ ] æŒç»­ç›‘æ§æœåŠ¡çŠ¶æ€
- [ ] æ£€æŸ¥é”™è¯¯æ—¥å¿—
- [ ] ç›‘æ§èµ„æºä½¿ç”¨
- [ ] å‡†å¤‡åº”æ€¥å“åº”

**éƒ¨ç½²å 7 å¤©å†…ï¼š**

- [ ] æ¯æ—¥æ£€æŸ¥æœåŠ¡çŠ¶æ€
- [ ] æ”¶é›†æ€§èƒ½æ•°æ®
- [ ] ä¼˜åŒ–é…ç½®å‚æ•°
- [ ] å®Œå–„ç›‘æ§å‘Šè­¦

---

## âœ… ç­¾ç½²ç¡®è®¤

**éƒ¨ç½²è´Ÿè´£äºº**: ________________  
**éƒ¨ç½²æ—¥æœŸ**: ________________  
**éƒ¨ç½²æ—¶é—´**: ________________  
**ç¡®è®¤ç­¾å**: ________________

---

## ğŸ“Š éƒ¨ç½²ç»“æœè®°å½•

**éƒ¨ç½²çŠ¶æ€**: [ ] æˆåŠŸ [ ] å¤±è´¥ [ ] éƒ¨åˆ†æˆåŠŸ

**é‡åˆ°çš„é—®é¢˜**:
1. ________________
2. ________________
3. ________________

**è§£å†³æ–¹æ¡ˆ**:
1. ________________
2. ________________
3. ________________

**å¤‡æ³¨**:
________________
________________
________________

---

**æ£€æŸ¥æ¸…å•ç‰ˆæœ¬**: 1.0  
**æ›´æ–°æ—¥æœŸ**: 2024-12-30  
**é€‚ç”¨é¡¹ç›®**: AI è¯•å·æ‹ç…§æµ‹è¯„å·¥å…· v1.0.0

---

## ğŸ‰ æ­å–œï¼

å¦‚æœæ‰€æœ‰æ£€æŸ¥é¡¹éƒ½å·²å®Œæˆï¼Œä½ çš„ç³»ç»Ÿå·²ç»å‡†å¤‡å¥½æŠ•å…¥ç”Ÿäº§ä½¿ç”¨äº†ï¼

**ä¸‹ä¸€æ­¥**:
1. å¼€å§‹ç”¨æˆ·éªŒæ”¶æµ‹è¯•
2. é€æ­¥æ”¾å¼€æµé‡
3. æŒç»­ç›‘æ§å’Œä¼˜åŒ–
4. æ”¶é›†ç”¨æˆ·åé¦ˆ

ç¥éƒ¨ç½²é¡ºåˆ©ï¼ğŸš€
